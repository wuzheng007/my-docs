# 正则表达式

正则表达式是匹配模式，要是匹配字符，要么匹配位置。

## 字符匹配

### 1.两种模糊匹配

### [2.字符类](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_expressions/Character_classes)

字符类，也叫字符组,可以区分各种字符。
例如`[abc]`，表示匹配一个字符，它可以是`a`、`b`、`c`中的任意一个。

#### 2.1 范围表示法

如果一个字符组里的字符特别多的话，可以使用范围表示法。
比如[12345abcdeABCED]，可以写成`[1-5a-eA-E]`。用连字符`-`来表示一个范围。但如果连字符出现在方括号的第一个或最后一个字符，则将其视为字面连字符，作为普通字符包含在字符组中。

- `[a-z]`：表示匹配一个字符，它可以是`a`到`z`中的任意一个。
- `[0-9]`：表示匹配一个字符，它可以是`0`到`9`中的任意一个。
- `[0-9a-zA-Z]`：表示匹配一个字符，它可以是`0`到`9`、`a`到`z`、`A`到`Z`中的任意一个。

#### 2.2 排除字符组

纵向模糊匹配，还有一种情形就是，某位字符可以是除了某些字符以外的任意一个，这时就可以使用排除字符组（反义字符组）。

- `[^abc]`：表示匹配一个字符，它不能是`a`、`b`、`c`中的任意一个。

#### 2.3 常见的简写形式

| 字符 | 含义                                                                                                                                                         |
| ---- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `\d` | 匹配数字，相当于`[0-9]`。记忆方式：其英文是 digit（数字）。例如`/\d/`匹配"a2bc"中的"2"                                                                       |
| `\D` | 匹配非数字的字符，相当于`[^0-9]`。                                                                                                                           |
| `\w` | 匹配数字、大小写字母和下划线，相当于`[0-9a-zA-Z_]`。记忆方式：w 是 word 的简写，也称单词字符                                                                 |
| `\W` | 匹配非单词字符，相当于`[^0-9a-zA-Z_]`。                                                                                                                      |
| `\s` | 匹配单个空白符，包括空格、制表符、换页符、换行符和其他 Unicode 空格。相当于`[\f\n\r\t\v\u0020\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]` |
| `\S` | 匹配非空白字符                                                                                                                                               |

### [3.量词](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_expressions/Quantifiers)

量词表示要匹配的字符或表达式的数量。

#### 3.1 简写形式

| 字符集   | 意义                                         |
| -------- | -------------------------------------------- |
| `x*`     | 将前面的项"x"匹配 0 次或多次，等价于`{0,}`。|
| `x+`     | 将前面的项"x"匹配 1 次或多次，等价于`{1,}`。  |
| `x?`     | 将前面的项"x"匹配 0 次或 1 次，等价于`{0,1}`。 |
| `x{m}`   | 将前面的项"x"匹配至少"m"次。                 |
| `x{m,}`  | 将前面的项"x"匹配"m"次。                     |
| `x{m,n}` | 将前面的项"x"至少匹配"m"次，至多匹配"n"次。  |

#### 3.2 贪婪匹配和惰性匹配

默认情况下，上面的量词都是贪婪匹配，这意味着它们会尽可能多地匹配字符。在量词后面加一个字符`?`，就可以将其变为惰性匹配。
例子：

```js
// 贪婪匹配
const reg1 = /\d{2,5}/g;
// 惰性匹配
const reg2 = /\d{2,5}?/g;
const str = '123 1234 12345 123456';
console.log(str.match(reg1)); // ["123", "1234", "12345", "12345"]
console.log(str.match(reg2)); // ["12", "12", "34", "12", "34", "12", "34", "56"]
```

### 4. 多选分支

一个模式可以实现横向和纵向模糊匹配。而多选分支可以支持多个子模式任选其一。具体形式如下：`p1|p2|p3`，其中`p1`、`p2`、`p3`是子模式，用管道符`|`分隔，表示其中给任何之一。

例如要匹配"good"和"nice"，可以使用`/good|nice/`。

```js
const reg21 = /good|nice/g;
const str21 = 'good idea, nice try.';
console.log(str21.match(reg21)); // ["good", "nice"]
```

## 位置匹配

位置是相邻字符之间的位置。

### 如何匹配位置?

在ES5中，共有6个锚字符，分别是：`^`、`$`、`\b`、`\B`、`(?=p)`、`(?!p)`。

#### ^和$

- `^`（脱字符）匹配开头，在多行匹配中匹配行开头。
- `$`（美元符号）匹配结尾，在多行匹配中匹配行结尾。

#### \b和\B

- `\b`是单词边界，具体就是`\w`与`\W`、`^`与`\w`、`\w`与`$`之间的位置。

```js
var result = "[JS] Lesson_01.mp4".replace(/\b/g, '#');
console.log(result); // => "[#JS#] #Lesson_01#.#mp4#"
```

- `\B`是非单词边界，具体就是`\w`与`\w`、`\W`与`\W`、`^`与`\W`、`\W`与`$`之间的位置。

```js
var result = "[JS] Lesson_01.mp4".replace(/\B/g, '#');
console.log(result); // #[J#S]# L#e#s#s#o#n#_#0#1#.m#p#4
```

#### (?=p)和(?!p)

- `(?=p)`是正向先行断言，`p`表示一个子模式，即匹配`p`的前面的位置。

```js
const result = 'hello'.replace(/(?=l)/g, '#');
console.log(result); // => he#l#lo
```

-`(?!p)`是负向先行断言，`p`表示一个子模式，即匹配非`p`的前面的位置。

```js
const result = 'hello'.replace(/(?=l)/g, '#');
console.log(result); // => #h#ell#o#
```

#### (?<=p)和(?<!p)

## 相关链接

1. [JS 正则表达式完整教程-稀土掘金](https://juejin.cn/post/6844903487155732494)
